<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ChemoPar-db - the chemokine partner database</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'home/images/favicon.ico' %}">

    <!-- Open Graph Data & Twitter Card -->
    <meta property="og:title" content="ChemoPar-db - The chemokine partner database"/>
    <meta property="og:url" content="https://chemopar-db.net"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="ChemoPar-db — The Chemokine Partners database — is a structural chemokine database focusing on the molecular interactions between chemokines and their binding partners."/>
    <meta property="og:image" content="{% static 'home/images/ChemoPar_logo.png' %}"/>

    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="ChemoPar-db - The chemokine partner database"/>
    <meta name="twitter:url" content="https://chemopar-db.net"/>
    <meta name="twitter:description" content="ChemoPar-db — The Chemokine Partners database — is a structural chemokine database focusing on the molecular interactions between chemokines and their binding partners."/>
    <meta name="twitter:image" content="{% static 'home/images/ChemoPar_logo.png' %}"/>

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <!-- jQuery UI -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>

    <!-- Additional CSS -->
    {% block addon_css %}{% endblock %}

    <!-- Custom Styles -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .msp-plugin ::-webkit-scrollbar-thumb {
            background-color: #474748 !important;
        }

        .viewerSection {
            margin: 120px 0 0 50px;
        }

        .ui-autocomplete {
            z-index: 1050 !important;
            position: absolute;
        }

        html, body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        
        #page-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        #content-wrap {
            flex: 1;
        }
        
        #footer {
            background-color: #f8f9fa;
            padding: 20px 0;
        }
        
        .footer {
            padding: 20px 0;
        }
        
        #footer-container hr {
            margin: 20px 0;
        }
        
        .logo-container {
            padding: 10px;
            text-align: center;
        }
        
        .logo-container img {
            max-height: 70px; /* Consistent height for logos */
            margin: 0 auto; /* Centering images */
        }
        
        @media (max-width: 767px) {
            .logo-container {
                padding: 15px; /* Increased padding for smaller screens */
            }
        }
        
        /* Dynamic padding for main content */
        .main-content {
            margin: 0px 20px 0px;
        }

        @media (min-width: 576px) {
            .main-content {
                margin: 0px 30px 0px;
            }
        }

        @media (min-width: 768px) {
            .main-content {
                margin: 0px 60px 0px;
            }
        }

        @media (min-width: 992px) {
            .main-content {
                margin: 0px 80px 0px;
            }
        }

        @media (min-width: 1200px) {
            .main-content {
                margin: 0px 100px 0px;
            }
        }
        .ui-autocomplete {
            z-index: 1051 !important; /* Ensure it appears above other elements */
            position: absolute;
            max-height: 400px; /* Limit height if needed */
            overflow-y: auto; /* Add scroll if content exceeds max-height */
        }
        .ui-autocomplete-category {
            font-weight: bold;
            font-size: 1.1em;
            margin: .2em .5em .2em 0;
            padding: .2em .5em;
            border-bottom: 1px solid #ccc;
        }
        .custom-input {
            color: #595C8D;
            background-color: white !important;
        }

        /* Hover to show dropdown */
        .navbar-nav .dropdown:hover .dropdown-menu {
            display: block;
            margin-top: 0; /* Adjusts positioning if needed */
        }
        
    </style>
</head>

<body>

    <!-- Header -->
    <header class="header">
        <nav class="navbar navbar-expand-lg fixed-top px-3" data-bs-theme="dark">
            <a class="navbar-brand" href="/index">
                <img src="{% static 'home/images/ChemoPar_logo.png' %}" height="50" alt="ChemoPar-db Logo">ChemoPar-db
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link {% if request.resolver_match.url_name == 'index' %}active{% endif %}" href="/index">Home</a>
                        </li>
                        <!-- Browse Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link {% if request.resolver_match.url_name == '/protein' %}active{% endif %} dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Browse
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="/protein">Browse Proteins</a></li>
                                <li><a class="dropdown-item" href="/structure">Browse Structures</a></li>
                                <li><a class="dropdown-item" href="/partner">Browse Partners</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if request.resolver_match.url_name == 'charts' %}active{% endif %}" href="/charts">Charts</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if request.resolver_match.url_name == 'api' %}active{% endif %}" href="/api">API</a>
                        </li>
                        <!-- Info Dropdown -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="infoDropdown" role="button" aria-expanded="false">
                                Info
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="infoDropdown">
                                <li><a class="dropdown-item" href="/example">Example</a></li>                                
                                <li><a class="dropdown-item" href="https://chemopar-db.readthedocs.io/en/latest/" target="_blank">Documentation</a></li>
                                <li><a class="dropdown-item" href="https://chemopar-db.readthedocs.io/en/latest/contact.html" target="_blank">Contact</a></li>
                                <li><a class="dropdown-item" href="https://chemopar-db.readthedocs.io/en/latest/citing_chemopar-db.html" target="_blank">Citing ChemoPar-db</a></li>
                            </ul>
                        </li>
                </ul>
                <form class="form-inline my-2 my-lg-0 custom-form" onsubmit="return false;">
                    <input id="search" class="form-control mr-sm-2 custom-input" type="search" placeholder="Search" aria-label="Search">
                </form>
            </div>
        </nav>
    </header>

    <!-- Page Content -->
    <div class="main-content">
        {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
    <div id="footer" class="mt-auto">
        <div class="footer container mt-4">
            <div id="footer-container">
                <hr>
                <div class="d-flex flex-row flex-wrap align-items-center justify-content-center">
                    <div class="logo-container col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6 d-flex flex-column">
                        <a href="https://vu.nl/en/about-vu/more-about/medicinal-chemistry-and-pharmaceutical-sciences" target="_blank">
                            <img src="https://vu.nl/assets/images/VU-logo-nobg.svg" class="img-fluid rounded mx-auto d-block logo-univ" style="height:70px">
                        </a>
                    </div>
                    <div class="logo-container col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6 d-flex flex-column">
                        <a href="https://www.aimms.nl" target="_blank">
                            <img src="https://www.aimms.nl/wp-content/uploads/2023/11/AIMMS-Logo-color.png" class="img-fluid rounded mx-auto d-block logo-univ">
                        </a>
                    </div>
                    <div class="logo-container col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6 d-flex flex-column">
                        <a href="https://ullapharmsci.org/" target="_blank">
                            <img src="{% static 'home/images/ULLA_logo.png' %}" class="img-fluid rounded mx-auto d-block logo-univ">
                        </a>
                    </div>
                    <div class="logo-container col-xl-3 col-lg-3 col-md-6 col-sm-6 col-6 d-flex flex-column">
                        <a href="https://www.ku.dk/" target="_blank">
                            <img src="{% static 'home/images/UCPH_minilogo.svg' %}" class="img-fluid rounded mx-auto d-block logo-univ" style="height:70px">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- GDPR Banner Customize -->
    <script>
        window.cookieconsent.initialise({
            palette: {
                popup: {
                    background: "#edeff5",
                    text: "#838391"
                },
                button: {
                    background: "#4b81e8"
                },
            },
            content: {
                href: " "
            }
        });
    </script>

    <!-- Initialize jQuery UI Autocomplete -->
    <script>
        $(document).ready(function() {
            $("#search").autocomplete({
                source: function(request, response) {
                    $.ajax({
                        url: "{% url 'protein-autocomplete' %}",
                        dataType: "json",
                        data: {
                            term: request.term
                        },
                        success: function(proteinData) {
                            $.ajax({
                                url: "{% url 'structure-autocomplete' %}",
                                dataType: "json",
                                data: {
                                    term: request.term
                                },
                                success: function(structureData) {
                                    // Combine and process results
                                    let combinedData = [];

                                    if (proteinData.length > 0) {
                                        combinedData.push({ label: "Chemokines", type: "header" });
                                        combinedData = combinedData.concat(proteinData);
                                    } else {
                                        combinedData.push({ label: "No chemokines found", type: "no-results" });
                                    }

                                    if (structureData.length > 0) {
                                        combinedData.push({ label: "Structures", type: "header" });
                                        combinedData = combinedData.concat(structureData);
                                    } else {
                                        combinedData.push({ label: "No structures found", type: "no-results" });
                                    }

                                    response(combinedData);
                                }
                            });
                        }
                    });
                },
                minLength: 2,
                select: function(event, ui) {
                    if (ui.item.url) {
                        window.location.href = ui.item.url;
                    }
                }
            }).autocomplete("instance")._renderItem = function(ul, item) {
                if (item.type === "header") {
                    return $("<li>")
                        .addClass("ui-autocomplete-category")
                        .append("<div>" + item.label + "</div>")
                        .appendTo(ul);
                } else if (item.type === "no-results") {
                    return $("<li>")
                        .append("<div style='color: gray;'>" + item.label + "</div>")
                        .appendTo(ul);
                } else {
                    return $("<li>")
                        .append("<div>" + item.label + "</div>")
                        .appendTo(ul);
                }
            };
        });
    </script>

</body>

{% block addon_js %}{% endblock %}

</html>
